tutorials advanced security setting up security edit on github setting up security ï goal: set up security with sros2 . tutorial level: advanced time: 15 minutes background ï the sros2 package provides the tools and instructions to use ros 2 on top of dds-security. the security features have been tested across platforms (linux, macos, and windows) as well as across different languages (c++ and python). the sros2 has been designed to work with any secure middleware, although not all middleware is open source and support varies depending on the ros distribution in use. installation ï typically security is available following installation using the ros 2 installation guide and the configuration guide . however, if you intend to install from source or switch middleware implementations, consider the following caveats: installing from source ï before installing from source, you will need to have a recent version openssl (1.0.2g or later) installed: linux macos windows sudo apt update sudo apt install libssl-dev brew install openssl you will need to have openssl on your library path to run dds-security demos. run the following command, and consider adding to your ~/.bash_profile : export dyld_library_path = ` brew --prefix openssl ` /lib: dyld_library_path export openssl_root_dir = ` brew --prefix openssl ` if you donât have openssl installed,  follow these instructions fast dds requires an additional cmake flag to build the security plugins, so the colcon invocation needs to be modified to pass: colcon build --symlink-install --cmake-args -dsecurity = on selecting an alternate middleware ï if you choose not to use the default middleware implementation, be sure to change your dds implementation before proceeding. ros 2 allows you to change the dds implementation at runtime. see how to work with mulitple rmw implementations to explore different middleware implementations. note that secure communication between vendors is not supported. run the demo ï 1. create a folder for the security files ï begin by creating folder to store all the files necessary for this demo: linux macos windows mkdir ~/sros2_demo mkdir ~/sros2_demo md c:\dev\ros2\sros2_demo 2. generate a keystore ï use the sros2 utilities to create the keystore. files in the keystore will be used to enable security for all the participants in the ros 2 graph. linux macos windows cd ~/sros2_demo ros2 security create_keystore demo_keystore cd ~/sros2_demo ros2 security create_keystore demo_keystore cd sros2_demo ros2 security create_keystore demo_keystore 3. generate keys and certificates ï once the keystore is created, create keys and certificates for each node with security enabled. for our demo, that includes the talker and listener nodes. this command uses the create_enclave feature which is covered in more detail in the next tutorial. linux macos windows ros2 security create_enclave demo_keystore /talker_listener/talker ros2 security create_enclave demo_keystore /talker_listener/listener ros2 security create_enclave demo_keystore /talker_listener/talker ros2 security create_enclave demo_keystore /talker_listener/listener ros2 security create_enclave demo_keystore /talker_listener/talker ros2 security create_enclave demo_keystore /talker_listener/listener if unable to write 'random state' appears then set the environment variable randfile . set randfile = c:\dev\ros2\sros2_demo\.rnd then re-run the commands above. 4. configure environment variables ï three environment variables allow the middleware to locate encryption materials and enable (and possibly enforce) security. these and other security-related environment variables are described in the ros 2 dds-security integration design document . linux macos windows export ros_security_keystore = ~/sros2_demo/demo_keystore export ros_security_enable = true export ros_security_strategy = enforce export ros_security_keystore = ~/sros2_demo/demo_keystore export ros_security_enable = true export ros_security_strategy = enforce set ros_security_keystore = %cd% /demo_keystore set ros_security_enable = true set ros_security_strategy = enforce these variables need to be defined in each terminal used for the demo. for convenience you can add them to your boot environment. 5. run the talker/listener demo ï begin the demo by launching the talker node. ros2 run demo_nodes_cpp talker --ros-args --enclave /talker_listener/talker in another terminal, do the same to launch the listener node. the environment variables in this terminal must be properly set as described in step 4 above. ros2 run demo_nodes_py listener --ros-args --enclave /talker_listener/listener these nodes will be communicating using authentication and encryption! if you look at the packet contents (for example, using tcpdump or wireshark as covered in another tutorial), you can see that the messages are encrypted. note: you can switch between the c++ (demo_nodes_cpp) and python (demo_nodes_py) packages arbitrarily. these nodes are able to communicate because we have created the appropriate keys and certificates for them. leave both nodes running as you answer the questions below. take the quiz! ï question 1 answer 1 open another terminal session, but do not set the environment variables so that security is not enabled. start the listener. what do you expect to happen? the listener launches but does not receive any messages. all traffic is encrypted, and without security enabled the listener does not receive anything. question 2 answer 2 stop the listener, set the environment variable ros_security_enable to true and start the listener again. what results do you expect this time? the listener still launches but does not receive messages. although security has now been enabled, it is not been configured properly since ros is unable to locate the key files. the listener launches, but in non-secure mode since security is not enforced, which means that although the properly configured talker is sending encrypted messages, this listener is unable to decrypt them. question 3 answer 3 stop the listener and set ros_security_strategy to enforce . what happens now? the listener fails to launch. security has been enabled and is being enforced. since it still is not properly configured, an error is thrown rather than launching in non-secure mode. learn more! ï are you ready to go further with ros security? take a look at the secure turtlebot2 demo . youâll find a functioning and complex implementation of ros 2 security, ready to try out your own custom scenarios. be sure to create pull requests and issues here so we can continue improving security support in ros! other versions v: jazzy releases jazzy (latest) iron humble galactic (eol) foxy (eol) eloquent (eol) dashing (eol) crystal (eol) in development rolling