how-to guides rosbag2: overriding qos policies edit on github rosbag2: overriding qos policies ï goal: override ros2bag qos profile settings for recording and playback. background ï with the introduction of dds in ros 2, quality of service (qos) compatibility for publisher/subscriber nodes needs to be considered when recording and playing back data. more detail on how qos works can be found here . for the purposes of this guide, it is sufficient to know that only the reliability and durability policies affect whether publishers/subscribers are compatible and can receive data from one other. ros2bag adapts its requested/offered qos profile when recording/playing data from a topic to prevent dropped messages. during playback, ros2bag also attempts to preserve the policy originally offered by the topic. certain situations may require specifying explicit qos profile settings so ros2bag can record/playback topics. these qos profile overrides can be specified via the cli using the --qos-profile-overrides-path flag. using qos overrides ï the yaml schema for the profile overrides is a dictionary of topic names with key/value pairs for each qos policy: topic_name : str qos_policy_name : str ... qos_duration : object sec : int nsec : int if a policy value is not specified, the value will fallback to the default used by ros2bag. if you specify a duration based policy such as deadline or lifespan , you will need to specify both seconds and nanoseconds. policy values are determined by the policyâs short keys which can be found using ros2topic verbs such as ros2 topic pub --help . all values are replicated below for reference. history : [ keep_all , keep_last ] depth : int reliability : [ system_default , reliable , best_effort , unknown ] durability : [ system_default , transient_local , volatile , unknown ] deadline : sec : int nsec : int lifespan : sec : int nsec : int liveliness : [ system_default , automatic , manual_by_topic , unknown ] liveliness_lease_duration : sec : int nsec : int avoid_ros_namespace_conventions : [ true , false ] example ï consider a topic /talker offering a transient_local durability policy. ros 2 publishers by default request volatile durability. ros2 topic pub -r 0.1 --qos-durability transient_local /talker std_msgs/string "data: hello world" in order for ros2bag to record the data, we would want to override the recording policy for that specific topic like so: # durability_override.yaml /talker : durability : transient_local history : keep_all and call it from the cli: ros2 bag record -a -o my_bag --qos-profile-overrides-path durability_override.yaml if we want to playback the bag file but with a different reliability policy, we can specify one as such; # reliability_override.yaml /talker : reliability : best_effort history : keep_all and call it from the cli: ros2 bag play --qos-profile-overrides-path reliability_override.yaml my_bag we can see the results with ros2 topic ros2 topic echo --qos-reliability best_effort /talker std_msgs/string other versions v: jazzy releases jazzy (latest) iron humble galactic (eol) foxy (eol) eloquent (eol) dashing (eol) crystal (eol) in development rolling