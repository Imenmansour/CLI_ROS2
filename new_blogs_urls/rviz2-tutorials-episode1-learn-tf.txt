rviz2 tutorials episode1: learn tf written by ruben alves  ros2 tutorials  04/03/2022 what we are going to learn how to use rviz2 step by step how to add the tfs of a simulation how to add the tfs of a real robot how to connect to a real robot through our robot lab start the ros1 bridge to be able to see tf data from ros1 in ros2 list of resources used in this post use the project: https://app.theconstructsim.com/#/l/47f74f81/ ros development studio (rosds)  http://rosds.online ros2 tutorials  ros2 basics in 5 days (python): https://app.theconstructsim.com/#/course/73 ros2 basics in 5 days (c++) : https://app.theconstructsim.com/#/course/61 welcome hi, and welcome to this new series of posts. in this series, we are going to explain how to add elements to rviz2 . we will start with tf, then we will continue with robots description, then cameras, pointclouds, lasers, and so on. in this first post, we are going to see how to add tfs in rviz2 . opening the rosject in order to learn how to add tfs in rviz2, we need to have ros installed. we already prepared a rosject ready for that: https://app.theconstructsim.com/#/l/47f74f81/ . you can download the rosject on your own computer if you want to work locally, but just by copying the rosject (clicking the link), you will have a setup already prepared for you. after the rosject has been successfully copied to your own area, you should see a run button. just click that button to launch the rosject. run rosject: rviz2 tutorials episode1: tf running the rosject after you have clicked the run button, the rosject should load and you should see a notebook that is open automatically: notebook  run rosject: rviz2 tutorials episode1: tf the notebook contains the instructions to launch a simulation. launching the box_bot simulation in order to launch the simulation, lets start by opening a new terminal: open a new terminal after having the first terminal open, lets run the following commands to launch a simulation: cd ~/ros2_ws/ colcon build --packages-select box_bot_description box_bot_gazebo ; source install/setup.bash ; ros2 launch box_bot_gazebo start_world_launch.py the commands we just executed only launch the world, but there is no robot on it yet. now, in a second terminal , lets spawn the robot with the commands below: cd ~/ros2_ws/ source install/setup.bash ros2 launch box_bot_gazebo spawn_robot_ros2.launch.py now that the robot has been successfully spawned, lets now open rviz2. for that, lets run the following commands in a third terminal . cd ~/ros2_ws/ source install/setup.bash rviz2 see the simulation in order to see the simulation, you can click on the open gazebo button: open gazebo by clicking open gazebo click open gazebo to view the gazebo simulation the final image you get should be similar to the following: open gazebo  rviz2 tutorials episode1 tf see rviz2 in the graphical tools in order to see rviz2 (rviz2), you have to click the open graphical tools button, in case the graphical window did not open automatically: open graphical tools / rviz now that you can see rviz2 , lets set the fixed frame on the top left to /odom (odometry), then lets click the add button on the bottom left and add a tf. once tf is added, lets disable the  all enabled  option to avoid getting confused with all those tfs that are shown. lets shown only specific frames: chassis , left_wheel, odom, right_wheel. in the end, our rviz2 should look similar to the following: specific frames  rviz2 tutorials episode1_ tf 3 we must also click show names to show the frame names in rviz2. moving the robot with teleop in order to see the frames of the robot moving in rviz2, lets run the keyboard teleop in a fourth terminal using the following commands: cd ~/ros2_ws/ source install/setup.bash ros2 run teleop_twist_keyboard teleop_twist_keyboard if you now press the keys to move the robot around, you should be able to see the robot moving in the simulation, and you should also see the tfs moving in rviz2. moving the robot with teleop  specific frames  rviz2 tutorials episode1 tf connecting to a real robot in order to see the tfs of a real robot, lets click on the real robot lab button that is available when you are not on the  desktop  page of the construct. after clicking real robot lab , please select a robot and click book now . its free. real robot lab  make a reservation when you have the robot available for you, open the rosject and click on the button to connect to the real robot. connecting to the real robot lab after the connection is successfully established, you should have something similar to the following: real robot lab connected launch ros1_bridge before loading ros1_bridge, lets load the parameters that we want to do the bridge. open a terminal and type the following: cd ~/catkin_ws roslaunch load_params load_params.launch the command above loads basically the instructions saying: hey, ros1, publish these specific topics because i want them to be available on ros2 . now, lets run the parameter_bridge in a second terminal : cd ~/ros2_ws/ source /opt/ros/foxy/setup.bash source install/setup.bash ros2 run ros1_bridge parameter_bridge now that ros1_bridge is running, we should be able to easily see ros2 topics in a third terminal : cd ~/ros2_ws/ source install/setup.bash ros2 topic list you should see some topics listed, and the one we are most interested in today is the /tf topic. if we now just open rviz2 : rviz2 we should now do the same procedure that we did previously, in order to see the tf data in rviz. please refer to the section see rviz2 in the graphical tools already explained above (set /odom as the fixed frame, and add the tf panel). moving the robot with ros1 now that we are connected to our robot and we have rviz2 setup ready, we can move the robot either with ros1 or ros2. lets move it with ros1, by running the following commands in a fourth terminal : source ~/catkin_ws/devel/setup.bash rosrun teleop_twist_keyboard teleop_twist_keyboard.py if you now move the robot by following the instructions, you should see the reflections in the camera of the real robot, and also in the rviz2: seeing real robot tfs in rviz2 congratulations. you now know how to see tf data in rviz2. youtube video so this is the post for today. remember that we have the live version of this post on youtube. if you liked the content, please consider subscribing to our youtube channel. we are publishing new content ~every day. keep pushing your ros learning. related courses & training if you want to learn more  ros and ros2, we recommend the following courses: ros2 basics in 5 days (python): https://app.theconstructsim.com/#/course/73 ros2 basics in 5 days (c++) : https://app.theconstructsim.com/#/course/61 topics: laser_assembler | ros2 | rosbags check out these related posts how to become a robotics developer may 26, 2018 updated: july 26, 2023 robotics needs developers! robotics needs software engineers and software... read more 130. the open source robotics alliance apr 8, 2024 i would like to dedicate this episode to all the ros developers out there who are thinking and... read more 129. ros2ai jan 29, 2024 i would like to dedicate this episode to all the ros developers who believe that chatgpt or... read more  older entries 0 comments submit a comment cancel reply your email address will not be published. comment name email website save my name, email, and website in this browser for the next time i comment. submit comment Î´ this site uses akismet to reduce spam. learn how your comment data is processed . pin it on pinterest share this twitter linkedin reddit facebook gmail